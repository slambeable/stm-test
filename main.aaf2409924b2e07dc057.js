(()=>{"use strict";const e={headersName:["Name","Picture","Location","Email","Phone","Registration date"],errorContent:e=>`<div class="alert-error">\n      <div class="alert-error__content">\n        <h2 class="alert-error__title">\n          It look like there was a problem.\n        </h2>\n        <div class="alert-error__body">\n          <p>An error occurred: \n            <span class="alert-error__status">${e}</span>. Please try again later.</p>\n        </div>\n      </div>\n    </div>`},t=()=>{var e;return`<div class="page-loader"><div class="page-loader__header"></div>${`<div  class="page-loader__lds-spinner">\n    ${(e=12,Array.apply(null,{length:e}).map(Number.call,Number)).map((()=>"<div></div>")).join("")}\n  </div>`}</div>`};class r{constructor(e){this.app=e,this.element=""}render(){return this.app.insertAdjacentHTML("afterbegin",t()),this.element=this.app.querySelector(".page-loader"),this.element}remove(){this.app.removeChild(this.element)}}class s{constructor(e,t){this.app=e,this.userData=t,this.element=""}render(){var t;return this.app.insertAdjacentHTML("afterbegin",(t=this.userData,`<div class="users-data"><table class="users-data__table"><thead><tr>${e.headersName.map((e=>`<th>${e}</th>`)).join(" ")}</tr></thead><tbody>${t.map((e=>{return`<tr class="users-data__row">\n      <td class="users-data__name">${e.name.first} ${e.name.last}</td>\n      <td>\n        <div class="tooltip">\n          <img src="${e.picture.thumbnail}" alt="user-${e.name.first}-${e.name.last}"/>\n          <img class="tooltip-image" src="${e.picture.large}" alt="user-${e.name.first}-${e.name.last}-large"/>\n        </div>\n      </td>\n      <td>${e.location.state} ${e.location.city}</td>\n      <td>${e.email}</td>\n      <td>${e.phone}</td>\n      <td>${t=new Date(e.registered.date),t.toLocaleString("en-GB").split(",")[0]}</td>\n    </tr>`;var t})).join(" ")}</tbody></table></div>`)),this.element=this.app.querySelector(".users-data"),this.element}remove(){this.app.removeChild(this.element)}}class a{constructor(e){this.app=e,this.element=""}render(){return this.app.insertAdjacentHTML("afterbegin",(this.userData,'<div class="users-filter"><input class="users-filter__input" placeholder="Filter by Name"/><button class="users-filter__button">Reset</button><div class="users-filter__empty">Sorry, but no users with this name were found</div></div>')),this.element=this.app.querySelector(".users-filter"),this.element}remove(){this.app.removeChild(this.element)}addFilterHandler(e){const t=this.element.querySelector(".users-filter__input"),r=this.element.querySelector(".users-filter__button"),s=this.element.querySelector(".users-filter__empty"),a=[...e.querySelectorAll(".users-data__name")],n=e.querySelector("table");t.addEventListener("input",function(e,t){let r=0;return function(){clearTimeout(r),r=setTimeout((()=>{e.apply(this,arguments)}),t||0)}}((e=>{const{value:t}=e.target,r=t.trim().toLowerCase();let i=0;a.forEach((e=>{const t=e.textContent.trim().toLowerCase().slice(0,r.length),{parentElement:s}=e;t!==r?(s.classList.add("users-data__row_hide"),i-=1):(s.classList.remove("users-data__row_hide"),i+=1)})),i===-a.length?(s.classList.add("users-filter__empty_visible"),n.classList.add("users-data__table_hide")):(s.classList.remove("users-filter__empty_visible"),n.classList.remove("users-data__table_hide"))}),500)),r.addEventListener("click",(()=>{t.value="",a.forEach((e=>{const{parentElement:t}=e;t.classList.remove("users-data__row_hide"),s.classList.remove("users-data__empty-users_visible"),n.classList.remove("users-data__table_hide")}))}))}}const n=e=>{if(!e.ok)throw new Error(e.status);return e.json()},i=e=>e.results;function l(t){(t=>{const r=document.querySelector("#app");r.innerHTML="";const s=e.errorContent(t);r.insertAdjacentHTML("afterbegin",s)})(t),console.error(t)}document.addEventListener("DOMContentLoaded",(async()=>{try{const e=document.querySelector("#app"),t=new r(e),o=new a(e);t.render();const d=await(async e=>fetch(e).then(n).then(i).catch(l))("https://randomuser.me/api/?results=15"),c=new s(e,d).render();o.render(),o.addFilterHandler(c),t.remove()}catch(e){console.error(e,"- Rendering cannot happen because no data was received.")}}))})();
//# sourceMappingURL=main.aaf2409924b2e07dc057.js.map